<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="523px" preserveAspectRatio="none" style="width:724px;height:523px;" version="1.1" viewBox="0 0 724 523" width="724px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xahrpw3ehyus" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="280.5" y="22.9951">Publication Observer</text><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="68" y="281.2578"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="217" y="112.5938"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="222.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="227.9922"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="179.6016" style="stroke: #000000; stroke-width: 2.0;" width="700" x="13" y="243.125"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="403" x="300" y="325.5234"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="403" x="300" y="371.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="73" y1="81.5938" y2="178.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="73" x2="73" y1="178.9922" y2="206.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="73" y1="206.9922" y2="468.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="222" x2="222" y1="81.5938" y2="178.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="222" x2="222" y1="178.9922" y2="206.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="222" x2="222" y1="206.9922" y2="468.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="389" y1="81.5938" y2="178.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="389" x2="389" y1="178.9922" y2="206.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="389" y1="206.9922" y2="468.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="585" x2="585" y1="81.5938" y2="178.9922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="585" x2="585" y1="178.9922" y2="206.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="585" x2="585" y1="206.9922" y2="468.8594"/><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="23" y="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="30" y="66.292">DataReader</text><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="23" y="467.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="30" y="487.8545">DataReader</text><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="144" y="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="151" y="66.292">PublicationObserver</text><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="144" y="467.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="151" y="487.8545">PublicationObserver</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="310" y="78.292">SingleThreadExecutor</text><ellipse cx="389" cy="49.2969" fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="385,37.2969,391,32.2969,389,37.2969,391,42.2969,385,37.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="310" y="480.8545">SingleThreadExecutor</text><ellipse cx="389" cy="500.1563" fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="385,488.1563,391,483.1563,389,488.1563,391,493.1563,385,488.1563" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="207" x="482" y="42.2969"/><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="207" x="478" y="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="193" x="485" y="66.292">PublicationObserverListener</text><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="207" x="482" y="467.8594"/><rect fill="#FEFECE" filter="url(#f1xahrpw3ehyus)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="207" x="478" y="471.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="193" x="485" y="491.8545">PublicationObserverListener</text><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="68" y="281.2578"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="217" y="112.5938"/><rect fill="#FFFFFF" filter="url(#f1xahrpw3ehyus)" height="222.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="384" y="227.9922"/><polygon fill="#A80036" points="205,108.5938,215,112.5938,205,116.5938,209,112.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="211" y1="112.5938" y2="112.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="80" y="107.6606">on_data_available()</text><polygon fill="#A80036" points="377,137.7266,387,141.7266,377,145.7266,381,141.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="227" x2="383" y1="141.7266" y2="141.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="234" y="136.7935">submit()</text><polygon fill="#A80036" points="84,166.8594,74,170.8594,84,174.8594,80,170.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="78" x2="221" y1="170.8594" y2="170.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="90" y="165.9263">done</text><polygon fill="#A80036" points="372,223.9922,382,227.9922,372,231.9922,376,227.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="378" y1="227.9922" y2="227.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="10" y="223.0591">run()</text><rect fill="none" height="179.6016" style="stroke: #000000; stroke-width: 2.0;" width="700" x="13" y="243.125"/><polygon fill="#EEEEEE" points="13,243.125,90,243.125,90,250.125,80,260.125,13,260.125,13,243.125" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="256.1919">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="105" y="255.3354">[RETCODE_NO_DATA|RETCODE_ERROR]</text><polygon fill="#A80036" points="89,277.2578,79,281.2578,89,285.2578,85,281.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="83" x2="383" y1="281.2578" y2="281.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="95" y="276.3247">read_next_sample_untyped()</text><polygon fill="#A80036" points="372,306.3906,382,310.3906,372,314.3906,376,310.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="73" x2="378" y1="310.3906" y2="310.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="80" y="305.4575">sample, sampleInfo</text><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="403" x="300" y="325.5234"/><polygon fill="#EEEEEE" points="300,325.5234,364,325.5234,364,332.5234,354,342.5234,300,342.5234,300,325.5234" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="315" y="338.5903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="379" y="337.7339">[sampleInfo.valid_data = true]</text><polygon fill="#A80036" points="573.5,359.6563,583.5,363.6563,573.5,367.6563,577.5,363.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="579.5" y1="363.6563" y2="363.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="401" y="358.7231">publicationDiscovered()</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="300" x2="703" y1="372.7891" y2="372.7891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="305" y="382.9995">[sampleInfo.valid_data = false]</text><polygon fill="#A80036" points="573.5,403.5938,583.5,407.5938,573.5,411.5938,577.5,407.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394" x2="579.5" y1="407.5938" y2="407.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="401" y="402.6606">publicationLost()</text><polygon fill="#A80036" points="14,446.7266,4,450.7266,14,454.7266,10,450.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="388" y1="450.7266" y2="450.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="20" y="445.7935">done</text><!--
@startuml
title Publication Observer

participant DataReader
participant PublicationObserver
control SingleThreadExecutor
collections PublicationObserverListener

DataReader -> PublicationObserver: on_data_available()
activate PublicationObserver

PublicationObserver -> SingleThreadExecutor: submit()
PublicationObserver - -> DataReader: done
deactivate PublicationObserver
...
[-> SingleThreadExecutor: run()
activate SingleThreadExecutor
loop RETCODE_NO_DATA|RETCODE_ERROR

  SingleThreadExecutor -> DataReader: read_next_sample_untyped()
  activate DataReader
  DataReader - -> SingleThreadExecutor: sample, sampleInfo
  deactivate DataReader

  alt sampleInfo.valid_data = true
    SingleThreadExecutor -> PublicationObserverListener: publicationDiscovered()
  else sampleInfo.valid_data = false
    SingleThreadExecutor -> PublicationObserverListener: publicationLost()
  end
end
[<- - SingleThreadExecutor: done
deactivate SingleThreadExecutor
@enduml

PlantUML version 1.2017.15(Mon Jul 03 18:45:34 CEST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1024-b8
Operating System: Linux
OS Version: 3.10.0-693.11.1.el7.x86_64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>